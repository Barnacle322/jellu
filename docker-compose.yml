version: '3.8'

services:
    jellu:
        build: .
        container_name: jellu
        restart: unless-stopped
        networks:
            - traefik
        labels:
            # Enable Traefik
            - 'traefik.enable=true'

            # HTTP Router
            - 'traefik.http.routers.jellu.rule=Host(`your-domain.com`)'
            - 'traefik.http.routers.jellu.entrypoints=web'

            # HTTPS Router (optional, recommended)
            - 'traefik.http.routers.jellu-secure.rule=Host(`your-domain.com`)'
            - 'traefik.http.routers.jellu-secure.entrypoints=websecure'
            - 'traefik.http.routers.jellu-secure.tls=true'
            - 'traefik.http.routers.jellu-secure.tls.certresolver=letsencrypt'

            # HTTP to HTTPS redirect (optional)
            - 'traefik.http.middlewares.jellu-redirect.redirectscheme.scheme=https'
            - 'traefik.http.middlewares.jellu-redirect.redirectscheme.permanent=true'
            - 'traefik.http.routers.jellu.middlewares=jellu-redirect'

            # Service
            - 'traefik.http.services.jellu.loadbalancer.server.port=80'

networks:
    traefik:
        external: true
